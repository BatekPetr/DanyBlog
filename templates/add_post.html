<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if edit %}Upravit{% else %}Přidat{% endif %} příspěvek</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

    <script>
        function addImageInput() {
            const imageInputsDiv = document.getElementById('image-inputs');
            const newInput = document.createElement('input');
            newInput.type = 'file';
            newInput.name = 'images';  // Ujistěte se, že používáte stejné jméno jako v backendu
            newInput.classList.add('form-control-file', 'mt-2');
            newInput.multiple = true;
            imageInputsDiv.appendChild(newInput);
        }
    </script>
</head>
<body>
    <div class="container mt-5">
        <h1>{% if edit %}Upravit{% else %}Přidat{% endif %} příspěvek</h1>
        <form action="{% if edit %}{{ url_for('edit_post', post_id=post.id) }}{% else %}{{ url_for('add_post') }}{% endif %}" method="POST" enctype="multipart/form-data">
            <div class="form-group">
                <label for="title">Titulek</label>
                <input type="text" class="form-control" id="title" name="title" value="{{ post.title if post else '' }}" required>
            </div>
            <div class="form-group">
                <label for="content">Text příspěvku</label>
                <textarea class="form-control" id="content" name="content" rows="5" required>{{ post.content if post else '' }}</textarea>
            </div>
            <div class="form-group" id="image-inputs">
                <label for="images">Obrázky:</label>
                <input type="file" class="form-control-file" name="images" multiple>
                {% if post.images %}
                    <p>Existující obrázky:</p>
                    {% for image in post.images %}
                        <img src="{{ url_for('static', filename='uploads/' + image) }}" style="max-width: 100px; height: auto;">
                    {% endfor %}
                {% endif %}
            </div>
            <button type="button" class="btn btn-secondary mt-2" onclick="addImageInput()">Přidat další obrázek</button>
            <button type="submit" class="btn btn-success">{% if edit %}Uložit změny{% else %}Přidat příspěvek{% endif %}</button>
        </form>
        <a href="{{ url_for('index') }}" class="btn btn-secondary mt-3">Zpět na domovskou stránku</a>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
</body>
</html>